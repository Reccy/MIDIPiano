language: cpp

compiler:
  - clang

branches:
  only:
    - master
    - travis-test

before_install:
  - mkdir build
  - cd build
  - cmake ..

install:
  - make
  - chmod +x MidiPianoTestRunner

script:
  - ./MidiPianoTestRunner

deploy:
  provider: releases
  api_key: $GITHUB_OAUTH_TOKEN
  file: ./MidiPiano.exe
  cleanup: false
  on:
    tags: true
